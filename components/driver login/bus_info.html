<html>
    <head>
        <title>Firebase_form</title>
        <link rel="stylesheet" href="businfo.css">
    </head>
    <body>
        <div class="box">
            <div class="form">
                <h2>Bus_info Form</h2>
                <form>
                    <div class="inputbox">
                        <span>Busnumber:</span><br>
                        <input type="text" value="" id="busnum" required>
                        
                    </div>
                    <div class="inputbox">
                        <span> from:</span><br>
                        <input type="text" value="" id="locstart" required>
                        
                    </div>
                    <div class="inputbox">
                        <span>to:</span><br>
                        <input type="text" value="" id="locend" required>
                        
                    </div>
                    <div class="inputbox">
                        <span>departure:</span><br>
                        <input type="time" value="" id="tstart" required>
                        
                    </div>
                    <div class="inputbox"><br>
                        <span>reach time(estimated):</span><br>
                        <input type="time" value="" id="tend" required>
                        
                    </div>
                    <input type="submit" value="submit" class="sub" id="submit">
                </form>
            </div>
        </div>
        <script type="module">
        
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
            import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
            
            // Your web app's Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyADFrTI9hs0563vJlVV2LopRGyPNupYSD8",
                authDomain: "project3-39d63.firebaseapp.com",
                projectId: "project3-39d63",
                storageBucket: "project3-39d63.appspot.com",
                messagingSenderId: "211637826568",
                appId: "1:211637826568:web:e9bbe3d33eeea3ad564dbd"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            //get ref to datbase service
            const db=getDatabase(app);

            document.getElementById("submit").addEventListener('click', function(e){
                e.preventDefault();
                set(ref(db, 'busInformation/'+ document.getElementById("busnum").value),
                {
                    bus_number: document.getElementById("busnum").value,
                    Starting: document.getElementById("locstart").value,
                    Destination: document.getElementById("locend").value,
                    Departure: document.getElementById("tstart").value,
                    to_be_Reached: document.getElementById("tend").value
                });
            alert("bus info adding successful")
            window.location.href='dr_info.html'
            })             
        </script>
    </body>
</html>